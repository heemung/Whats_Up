<!DOCTYPE html>
<html>
<head>
    <style>
        /* Set the size of the div element that contains the map */
        #map {
            height: 400px; /* The height is 400 pixels */
            width: 100%; /* The width is the width of the web page */
        }
    </style>
</head>
<body>
    <h3>My Google Maps Demo</h3>

    <div id="map"></div>
    <script>
        function initMap() {

            var geoLat = '@ViewBag.geoLat';
            var geoLong = '@ViewBag.geoLong';

            if (geoLat != null && geoLong != null)
            {
                var userLocation = { lat: geoLat, lng: geoLong }
                var map = new google.maps.Map(
                    document.getElementById('map'), { zoom: 3, center: userLocation });

                    @foreach(var outerArray in ViewBag.Coordinates)
                     {
                        if (outerArray["info"]["satcount"].Value != 0)
                        {
                            foreach (var innerArray in outerArray["above"])
                            {
                                  double latitude = innerArray["satlat"].Value;
                                  double longitude = innerArray["satlng"].Value;
                                    <text>
                var satPosition = { lat: @latitude, lng: @longitude }
                var satMarker = new google.maps.Marker({
                    position: satPosition,
                    map: map
                })
                                    </text>

                            }
                        }
                     }
            }
        }




    </script>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=@ViewBag.GoogleKey&callback=initMap">
    </script>

</body>
</html>
<form action="/Home/InputLocation">
    <input name="addressLine" type="text" placeholder="Enter your address" />
    <input name="postalCode" type="text" placeholder="Enter your Zip Code" />
    <input type="submit" value="Submit" />
</form>
<div>@ViewBag.Testing</div>
<div>@ViewBag.Coordinates</div>

@* var lat = document.getElementById("postalCode").innerHTML*@